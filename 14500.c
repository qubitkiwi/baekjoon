#include <stdio.h>
#include <stdlib.h>

int tatro[19][4][4] = {{{1,1,1,1}, // i
                       {0,0,0,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{1,0,0,0},
                       {1,0,0,0},
                       {1,0,0,0},
                       {1,0,0,0}},


                      {{1,1,0,0}, // o
                       {1,1,0,0},
                       {0,0,0,0},
                       {0,0,0,0}},


                      {{1,1,1,0}, // j
                       {0,0,1,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{0,1,0,0},
                       {0,1,0,0},
                       {1,1,0,0},
                       {0,0,0,0}},

                      {{1,0,0,0},
                       {1,1,1,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{1,1,0,0},
                       {1,0,0,0},
                       {1,0,0,0},
                       {0,0,0,0}},
                       
                       
                      {{1,0,0,0}, // L
                       {1,0,0,0},
                       {1,1,0,0},
                       {0,0,0,0}},

                      {{1,1,1,0},
                       {1,0,0,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{1,1,0,0},
                       {0,1,0,0},
                       {0,1,0,0},
                       {0,0,0,0}},

                      {{0,0,1,0},
                       {1,1,1,0},
                       {0,0,0,0},
                       {0,0,0,0}},  

                      {{1,1,0,0}, // N
                       {0,1,1,0},
                       {0,0,0,0},
                       {0,0,0,0}},
                      
                      {{0,1,0,0},
                       {1,1,0,0},
                       {1,0,0,0},
                       {0,0,0,0}},
                       
                      {{1,0,0,0}, // RN
                       {1,1,0,0},
                       {0,1,0,0},
                       {0,0,0,0}},

                      {{0,1,1,0},
                       {1,1,0,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{1,1,1,0}, // T
                       {0,1,0,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{1,0,0,0},
                       {1,1,0,0},
                       {1,0,0,0},
                       {0,0,0,0}},

                      {{0,1,0,0},
                       {1,1,1,0},
                       {0,0,0,0},
                       {0,0,0,0}},

                      {{0,1,0,0},
                       {1,1,0,0},
                       {0,1,0,0},
                       {0,0,0,0}}};

int tatro_size[19][2] = {{4,1},
                        {1,4},
                        {2,2},
                        {3,2},
                        {2,3},
                        {3,2},
                        {2,3},
                        {2,3},
                        {3,2},
                        {2,3},
                        {3,2},
                        {3,2},
                        {2,3},
                        {2,3},
                        {3,2},
                        {3,2},
                        {2,3},
                        {3,2},
                        {2,3}};

int tatromino_max(int **map, int N, int M){
    int sum, max = 0;
    int kind, C, R, i, j;

    for (kind = 0; kind < 19; kind++){
        for (C = 0; C <= N-tatro_size[kind][1]; C++){
            for (R = 0; R <= M-tatro_size[kind][0]; R++){
                sum = 0;
                for (i = 0; i < tatro_size[kind][1]; i++){
                    for (j = 0; j < tatro_size[kind][0]; j++){
                        sum += map[C+i][R+j]*tatro[kind][i][j];
                    }
                }
                
                if (sum > max)
                    max = sum;                
            }
        }        
    }

    return max;
}

int main(){

    int N, M, max;
    scanf("%d %d", &N, &M);

    int **map = (int**) calloc(N, sizeof(int*));
    for (int i = 0; i < N; i++)
        map[i] = (int*) calloc(M, sizeof(int));
    
    for (int i = 0; i < N; i++)
        for (int j = 0; j < M; j++)
            scanf("%d", &map[i][j]);
            
    max = tatromino_max(map, N, M);
    printf("%d\n", max);

    for (int i = 0; i < N; i++)
        free(map[i]);
    free(map);
    return 0;
}